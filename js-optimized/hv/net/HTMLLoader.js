define(["jquery"],function(e){var t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,n=/<body\b[^>]*>([\s\S]*?)<\/body>/gmi,r={ignoreInlineScript:!1},i=function(t){this.options=e.extend({},r,t),this.loading=!1};return i.prototype.load=function(t,n,r){var i=this;r=r||{},r.success=function(e){i.handleSuccess(e,n)},this.loading=!0,this.xhr=e.ajax(t,r)},i.prototype.isLoading=function(){return this.loading},i.prototype.handleSuccess=function(r,i){var s=e('<div id="#body">'),o=r;o.indexOf("<body")>=0&&(o=r.match(n)[0]),!this.options.ignoreInlineScript&&o.indexOf("<script")&&(o=o.replace(t,"")),i&&i(o,r),this.xhr=null,this.loading=!1},i.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null,this.loading=!1)},i.prototype.dispose=function(){this.cancel()},i})
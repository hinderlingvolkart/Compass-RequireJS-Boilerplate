define(["util/EventDispatcher"],function(e){var t={landscape:{x:"gamma",y:"beta",z:"alpha"},portrait:{x:"beta",y:"gamma",z:"alpha"}},n=1e3,r={x:0,y:0,z:0},i=new e;i.available=function(){return"ondeviceorientation"in window},i.setPrecision=function(e){n=1/e},i.get=function(e){return r[e]};var s=function(e){var s,o,u;for(var a in r)s=t[i.orientation][a],o=e[s],Math.round(o*n)!=Math.round(r[a]*n)&&(u=!0,r[a]=Math.round(o*n)/n,i.trigger("change"+a,o));u&&i.trigger("change",r)},o=function(e){i.orientation=window.orientation===0?"portrait":"landscape"};return i.available()&&(o(),window.addEventListener("orientationchange",o,!1),window.addEventListener("deviceorientation",s,!1)),i})
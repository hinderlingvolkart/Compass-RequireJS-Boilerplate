define(["hv/animation/AnimationFrame"],function(e){function s(){return(new Date).getTime()}function o(){var e,n=s();for(var r in t)e=t[r],n>=e.time+e.delay&&(e.repeat?(e.repeat--,e.repeat===0?p.remove(r):e.time+=e.delay):a(r),e.callback&&e.callback())}function u(e,r,i){return n++,t[n]=new d(e,r,i||0),l(),n}function a(e){delete t[e],f()||c()}function f(){for(var e in t)return!0;return!1}function l(){r||(i=e.request(h),"ontouchstart"in window&&document.addEventListener("touchmove",o,!1),r=!0)}function c(){r&&(e.cancel(i),"ontouchstart"in window&&document.removeEventListener("touchmove",o,!1),r=!1)}function h(){o(),i=e.request(h)}function d(e,t,n){this.time=s(),this.delay=t,this.end=this.time+this.delay,this.callback=e,this.repeat=n}var t={},n=0,r=!1,i,p={add:u,interval:function(e,t,n){return u(e,t,n||-1)},remove:a,tick:o};return p})